<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“¦ Ù…Ø¯ÙŠØ± Ø§Ù„ÙØ±Ø¹ MAD</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f4c3;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        h2 {
            color: #00897b;
            margin-top: 20px;
        }
        #productListContainer {
            margin-bottom: 20px;
            width: 90%;
            max-width: 600px;
        }
        #searchInput {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 10px;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        #searchInput:focus {
            outline: none;
            border-color: #00897b;
            box-shadow: 0 0 5px rgba(0, 137, 123, 0.3);
        }
        #productList {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #productList div {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
        }
        #productList div:hover {
            background-color: #f5f5f5;
        }
        #productList div span {
            color: #888;
        }
        #productList div button {
            background-color: #00897b;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }
        #productList div button:hover {
            background-color: #00695c;
        }
        #orderTable {
            width: 90%;
            max-width: 600px;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-top: 0;
        }
        #orderTable th, #orderTable td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
            font-size: 16px;
        }
        #orderTable th {
            background-color: #c5e1a5;
            color: #000;
        }
        #orderTable input[type="number"] {
            width: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            text-align: center;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        #orderTable input[type="number"]:focus {
            outline: none;
            border-color: #00897b;
            box-shadow: 0 0 5px rgba(0, 137, 123, 0.3);
        }
        #orderTable button {
            background-color: #ef5350;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }
        #orderTable button:hover {
            background-color: #c62828;
        }
        .buttonContainer {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            width: 90%;
            max-width: 600px;
            align-items: stretch;
        }
        .buttonContainer button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }
        .buttonContainer button:first-child {
            background-color: #00897b;
            color: white;
        }
        .buttonContainer button:first-child:hover {
            background-color: #00695c;
        }
        .buttonContainer button:nth-child(2) {
            background-color: #43a047;
            color: white;
        }
        .buttonContainer button:nth-child(2):hover {
            background-color: #2e7d32;
        }
        .buttonContainer button:last-child {
            background-color: #311b92;
            color: white;
        }
        .buttonContainer button:last-child:hover {
            background-color: #1a237e;
        }
        #adminPanel {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 90%;
            max-width: 600px;
            box-sizing: border-box;
            display: none;
        }
        #adminPanel h3 {
            color: #00897b;
            margin-bottom: 15px;
            text-align: center;
        }
        #adminPanel input[type="text"],
        #adminPanel input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 10px;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        #adminPanel input[type="text"]:focus,
        #adminPanel input[type="number"]:focus {
            outline: none;
            border-color: #00897b;
            box-shadow: 0 0 5px rgba(0, 137, 123, 0.3);
        }
        #adminPanel button {
            background-color: #00897b;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            width: 100%;
            font-family: 'Cairo', sans-serif;
        }
        #adminPanel button:hover {
            background-color: #00695c;
        }
        #adminCodeContainer {
            margin-bottom: 20px;
            width: 90%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }
        #adminCodeContainer label {
            margin-bottom: 5px;
            font-size: 16px;
            color: #555;
            font-family: 'Cairo', sans-serif;
        }
        #adminCodeContainer input[type="password"] {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 10px;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        #adminCodeContainer input[type="password"]:focus {
            outline: none;
            border-color: #00897b;
            box-shadow: 0 0 5px rgba(0, 137, 123, 0.3);
        }
        #adminCodeContainer button {
            background-color: #00897b;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }
        #adminCodeContainer button:hover {
            background-color: #00695c;
        }
        @media (max-width: 640px) {
            #productListContainer,
            #orderTable,
            .buttonContainer,
            #adminPanel,
            #adminCodeContainer {
                width: 95%;
            }
            .buttonContainer button {
                font-size: 16px;
                padding: 10px 18px;
            }
             #orderTable th, #orderTable td{
                font-size: 14px;
                padding: 10px;
            }
        }
        .feedback {
            margin-top: 10px;
            color: #00897b;
            font-weight: bold;
            text-align: center;
        }
        #orderSummary {
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
            font-size: 18px;
            color: #00897b;
        }
        .product-image {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            margin-left: 10px;
            object-fit: cover;
        }
        #jsonInputContainer {
            margin-top: 20px;
            width: 90%;
            max-width: 600px;
        }
        #jsonInput {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 10px;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
            height: 200px;
            resize: vertical;
        }
        #jsonInput:focus {
            outline: none;
            border-color: #00897b;
            box-shadow: 0 0 5px rgba(0, 137, 123, 0.3);
        }
    </style>
</head>
<body>
    <h2>ğŸ“¦ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
    <div id="adminCodeContainer">
        <label for="adminCode">Ø§Ø¯Ø®Ù„ Ø±Ù…Ø² Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:</label>
        <input type="password" id="adminCode" placeholder="Ø§Ù„Ø±Ù…Ø²">
        <button onclick="verifyCode()">Ø¯Ø®ÙˆÙ„</button>
    </div>
    <div id="productListContainer">
        <input type="text" id="searchInput" onkeyup="searchDropdown()" placeholder="ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
        <div id="productList"></div>
    </div>
     <div id="orderSummary">
        Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0â‚ª
    </div>
    <table id="orderTable">
        <thead>
            <tr>
                <th>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬</th>
                <th>ğŸ–¼ï¸ Ø§Ù„ØµÙˆØ±Ø©</th>
                <th>ğŸ“Š Ø§Ù„Ø¹Ø¯Ø¯</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>ğŸ—‘ï¸ Ø­Ø°Ù</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div class="buttonContainer">
        <button onclick="sendOrder()">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button onclick="clearOrder()">ğŸ—‘ï¸ ØªÙØ±ÙŠØº Ø§Ù„Ø·Ù„Ø¨</button>
        <button onclick="printOrder()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
    <div id="adminPanel" style="display: none;">
        <h3>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h3>
        <input type="text" id="newProductName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
        <input type="text" id="newProductCategory" placeholder="ÙØ¦Ø© Ø§Ù„Ù…Ù†ØªØ¬">
        <input type="number" id="newProductPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
        <input type="text" id="newProductImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
        <div id="editMessage" class="feedback"></div>
        <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
        <div id="jsonInputContainer">
            <label for="jsonInput">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª JSON Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª:</label>
            <textarea id="jsonInput" placeholder="Ø£Ø¯Ø®Ù„ JSON Ù‡Ù†Ø§...">
            [
                {
                    "Title": "G106 L101 W201",
                    "Description": "Ù…Ø¨×¦×¢×™× G106 L101 W201",
                    "Price": 300.0,
                    "Image Link": "https://madperfume.co.il/upload/03-2025/product/3.jpg"
                },
                {
                    "Title": "A114 J105 L103 X102 W191",
                    "Description": "××‘×¦×¢×™× A114 J105 L103 X102 W191",
                    "Price": 500.0,
                    "Image Link": "https://madperfume.co.il/upload/03-2025/product/6.jpg"
                },
                {
                    "Title": "G106 J102 A122 L103 A112",
                    "Description": "××‘×¦×¢×™× G106 J102 A122 L103 A112",
                    "Price": 500.0,
                    "Image Link": "https://madperfume.co.il/upload/03-2025/product/7.jpg"
                }
            ]
            </textarea>
            <button onclick="addProductsFromJson()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† JSON</button>
        </div>
    </div>

    <script>
        const adminPassword = "5050";
        let products = [];
        let order = {};
        let totalOrderPrice = 0;

        window.onload = function() {
            displayProducts();
        };

        function displayProducts() {
            const productList = document.getElementById("productList");
            productList.innerHTML = "";
            products.forEach((product, index) => {
                const productDiv = document.createElement("div");
                productDiv.innerHTML = `
                    <span>${product.name} - ${product.category}</span>
                    <span>${product.price}â‚ª</span>
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <button data-product-index="${index}" onclick="addToOrder(this)">+</button>
                `;
                productList.appendChild(productDiv);
            });
        }

        function searchDropdown() {
            const searchInput = document.getElementById("searchInput");
            const filter = searchInput.value.toUpperCase();
            const productList = document.getElementById("productList");
            const productDivs = productList.getElementsByTagName("div");
            for (let i = 0; i < productDivs.length; i++) {
                const span = productDivs[i].getElementsByTagName("span")[0];
                if (span.textContent.toUpperCase().indexOf(filter) > -1) {
                    productDivs[i].style.display = "";
                } else {
                    productDivs[i].style.display = "none";
                }
            }
        }

        function addToOrder(buttonElement) {
            const productIndex = buttonElement.getAttribute("data-product-index");
            const product = products[productIndex];
            if (order[productIndex]) {
                order[productIndex].quantity++;
            } else {
                order[productIndex] = {
                    product: product,
                    quantity: 1,
                };
            }
            updateOrderTable();
        }

        function updateOrderTable() {
            const orderTableBody = document.querySelector("#orderTable tbody");
            orderTableBody.innerHTML = "";
            totalOrderPrice = 0;
            for (const index in order) {
                const orderItem = order[index];
                const row = orderTableBody.insertRow();
                const nameCell = row.insertCell();
                const imageCell = row.insertCell();
                const quantityCell = row.insertCell();
                const priceCell = row.insertCell();
                const deleteCell = row.insertCell();

                nameCell.textContent = orderItem.product.name;
                imageCell.innerHTML = `<img src="${orderItem.product.image}" alt="${orderItem.product.name}" class="product-image">`;
                quantityCell.innerHTML = `<input type="number" value="${orderItem.quantity}" min="1" data-product-index="${index}" onchange="updateQuantity(this)">`;
                priceCell.textContent = (orderItem.product.price * orderItem.quantity).toFixed(2) + "â‚ª";
                deleteCell.innerHTML = `<button data-product-index="${index}" onclick="deleteOrderItem(this)">ğŸ—‘ï¸</button>`;
                totalOrderPrice += orderItem.product.price * orderItem.quantity;
            }
             document.getElementById("orderSummary").textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${totalOrderPrice.toFixed(2)}â‚ª`;
        }

        function updateQuantity(inputElement) {
            const productIndex = inputElement.getAttribute("data-product-index");
            const quantity = parseInt(inputElement.value);
            if (quantity > 0) {
                order[productIndex].quantity = quantity;
            } else {
                inputElement.value = 1;
                order[productIndex].quantity = 1;
            }
            updateOrderTable();
        }

        function deleteOrderItem(buttonElement) {
            const productIndex = buttonElement.getAttribute("data-product-index");
            delete order[productIndex];
            updateOrderTable();
        }

        function sendOrder() {
            if (Object.keys(order).length === 0) {
                alert("Ø§Ù„Ø·Ù„Ø¨ ÙØ§Ø±Øº!");
                return;
            }
            let orderText = "Ø§Ù„Ø·Ù„Ø¨:\n";
            for (const index in order) {
                const orderItem = order[index];
                orderText += `${orderItem.product.name} - ${orderItem.quantity} - ${orderItem.product.price * orderItem.quantity}â‚ª\n`;
            }
            orderText += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${totalOrderPrice.toFixed(2)}â‚ª`;
            const whatsappUrl = `https://wa.me/972508765432?text=${encodeURIComponent(orderText)}`;
            window.open(whatsappUrl, "_blank");
            clearOrder();
        }

        function clearOrder() {
            order = {};
            totalOrderPrice = 0;
            updateOrderTable();
        }

        function printOrder() {
            if (Object.keys(order).length === 0) {
                alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨ Ù„Ø·Ø¨Ø§Ø¹ØªÙ‡!");
                return;
            }

            let orderText = "<h2 style='text-align:center;'>Ø§Ù„Ø·Ù„Ø¨:</h2><table style='width:100%; border-collapse: collapse; margin-top: 20px;'><thead><tr><th style='border: 1px solid #ddd; padding: 12px; text-align: center;'>Ø§Ù„Ù…Ù†ØªØ¬</th><th style='border: 1px solid #ddd; padding: 12px; text-align: center;'>Ø§Ù„ØµÙˆØ±Ø©</th><th style='border: 1px solid #ddd; padding: 12px; text-align: center;'>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th style='border: 1px solid #ddd; padding: 12px; text-align: center;'>Ø§Ù„Ø³Ø¹Ø±</th></tr></thead><tbody>";
            for (const index in order) {
                const orderItem = order[index];
                // Use a base URL if the image URL is relative.
                const baseUrl = window.location.origin;
                const imageUrl = orderItem.product.image.startsWith('http') ? orderItem.product.image : `${baseUrl}${orderItem.product.image}`;

                orderText += `<tr><td style='border: 1px solid #ddd; padding: 12px; text-align: center;'>${orderItem.product.name}</td><td style='border: 1px solid #ddd; padding: 12px; text-align: center;'><img src="${imageUrl}" alt="${orderItem.product.name}" style="width: 50px; height: 50px; border-radius: 5px; object-fit: cover;"></td><td style='border: 1px solid #ddd; padding: 12px; text-align: center;'>${orderItem.quantity}</td><td style='border: 1px solid #ddd; padding: 12px; text-align: center;'>${(orderItem.product.price * orderItem.quantity).toFixed(2)}â‚ª</td></tr>`;
            }
            orderText += `</tbody></table><p style='text-align:center; font-size: 18px; font-weight: bold;'>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${totalOrderPrice.toFixed(2)}â‚ª</p>`;

            const printWindow = window.open('', '', 'height=600,width=800');
            printWindow.document.write('<html><head><title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</title><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet"><style>body { font-family: "Cairo", sans-serif; }</style></head><body>');
            printWindow.document.write(orderText);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
            printWindow.close();
            clearOrder();
        }

        function verifyCode() {
            const adminCodeInput = document.getElementById("adminCode");
            const adminPanel = document.getElementById("adminPanel");
            if (adminCodeInput.value === adminPassword) {
                adminPanel.style.display = "block";
            } else {
                alert("Ø±Ù…Ø² Ø®Ø§Ø·Ø¦!");
            }
            adminCodeInput.value = "";
        }

        function addProduct() {
            const newProductNameInput = document.getElementById("newProductName");
            const newProductCategoryInput = document.getElementById("newProductCategory");
            const newProductPriceInput = document.getElementById("newProductPrice");
             const newProductImageInput = document.getElementById("newProductImage");
            const editMessage = document.getElementById("editMessage");

            if (!newProductNameInput.value || !newProductCategoryInput.value || !newProductPriceInput.value) {
                editMessage.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„!";
                return;
            }
            const newProduct = {
                name: newProductNameInput.value,
                price: parseFloat(newProductPriceInput.value),
                category: newProductCategoryInput.value,
                image: newProductImageInput.value || "https://via.placeholder.com/50"
            };
            products.push(newProduct);
            displayProducts();
            newProductNameInput.value = "";
            newProductCategoryInput.value = "";
            newProductPriceInput.value = "";
            editMessage.textContent = "ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!";
             setTimeout(() => {
                editMessage.textContent = "";
            }, 3000);
        }

        function addProductsFromJson() {
            const jsonInput = document.getElementById("jsonInput");
            try {
                const newProducts = JSON.parse(jsonInput.value);
                if (Array.isArray(newProducts)) {
                    newProducts.forEach(product => {
                        if (product.Title && product.Price) {
                            products.push({
                                name: product.Title,
                                price: product.Price,
                               category: product.Description ||"ØºÙŠØ± Ù…ØµÙ†Ù",
                                image: product["Image Link"] || "https://via.placeholder.com/50"
                            });
                        }
                    });
                    displayProducts();
jsonInput.value = "";
                } else {
                    alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª JSON ØµØ­ÙŠØ­Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.");
                }
            } catch (error) {
                alert("Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø³ÙŠÙ‚ JSON. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.");
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† JSON
        const newProducts = [
            {
                "Title": "G106 L101 W201",
                "Description": "Ù…Ø¨×¦×¢×™× G106 L101 W201",
                "Price": 300.0,
                "Image Link": "https://madperfume.co.il/upload/03-2025/product/3.jpg"
            },
            {
                "Title": "A114 J105 L103 X102 W191",
                "Description": "××‘×¦×¢×™× A114 J105 L103 X102 W191",
                "Price": 500.0,
                "Image Link": "https://madperfume.co.il/upload/03-2025/product/6.jpg"
            },
            {
                "Title": "G106 J102 A122 L103 A112",
                "Description": "××‘×¦×¢×™× G106 J102 A122 L103 A112",
                "Price": 500.0,
                "Image Link": "https://madperfume.co.il/upload/03-2025/product/7.jpg"
            }
        ];

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        newProducts.forEach(product => {
            products.push({
                name: product.Title,
                price: product.Price,
                category: product.Description || "ØºÙŠØ± Ù…ØµÙ†Ù",
                image: product["Image Link"] || "https://via.placeholder.com/50"
            });
        });

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        displayProducts();
    </script>
</body>
</html>
